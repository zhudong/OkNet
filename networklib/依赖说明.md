# NetworkLib 依赖说明

## 核心依赖

### 1. 网络请求库

#### OkGo (com.lzy.net:okgo:3.0.4)
- **作用**：网络请求核心库，基于OkHttp封装
- **包含内容**：
  - HTTP请求（GET、POST、PUT、DELETE等）
  - 文件上传下载
  - 请求拦截器
  - 响应回调
- **传递依赖**：
  - OkHttp3（自动包含，无需单独添加）
  - OkIO（OkHttp的依赖）

#### OkServer (com.lzy.net:okserver:2.0.5)
- **作用**：文件下载服务器库
- **功能**：
  - 多任务下载
  - 断点续传
  - 下载进度监听
- **依赖关系**：依赖OkGo

### 2. JSON解析库

#### Gson (com.google.code.gson:gson:2.8.1)
- **作用**：JSON序列化和反序列化
- **使用场景**：
  - `JsonConvert` 类中用于JSON转换
  - `Convert` 工具类中用于对象与JSON互转
  - 响应数据的解析

### 3. Android支持库

#### AppCompat (androidx.appcompat:appcompat:1.6.1)
- **作用**：Android兼容性支持库
- **用途**：提供向后兼容的Android功能

## 依赖关系图

```
networklib
├── OkGo 3.0.4
│   └── OkHttp3 (传递依赖)
│       └── OkIO (传递依赖)
├── OkServer 2.0.5
│   └── OkGo (依赖)
├── Gson 2.8.1
└── AppCompat 1.6.1
```

## 代码中的依赖使用

### OkGo相关
- `com.lzy.okgo.OkGo` - 网络请求入口
- `com.lzy.okgo.model.Response` - 响应模型
- `com.lzy.okgo.request.base.Request` - 请求基类
- `com.lzy.okgo.callback.AbsCallback` - 回调基类
- `com.lzy.okgo.convert.Converter` - 转换器接口

### OkHttp相关（通过OkGo传递）
- `okhttp3.Response` - HTTP响应
- `okhttp3.ResponseBody` - 响应体

### Gson相关
- `com.google.gson.Gson` - Gson实例
- `com.google.gson.stream.JsonReader` - JSON读取器

### Android SDK（无需添加依赖）
- `org.json.JSONObject` - Android SDK自带
- `org.json.JSONArray` - Android SDK自带

## 使用AAR时的依赖配置

当其他项目使用networklib的AAR时，需要在`build.gradle`中添加：

```gradle
dependencies {
    // 添加AAR
    implementation files('libs/networklib-release.aar')
    
    // 必须添加以下依赖
    implementation 'com.lzy.net:okgo:3.0.4'
    implementation 'com.lzy.net:okserver:2.0.5'
    implementation 'com.google.code.gson:gson:2.8.1'
    implementation 'androidx.appcompat:appcompat:1.6.1'
}
```

## 版本兼容性

- **最低SDK版本**：24 (Android 7.0)
- **目标SDK版本**：34 (Android 14)
- **编译SDK版本**：34

## 注意事项

### 1. AAR依赖传递说明

**重要**：AAR包不会自动包含其compile依赖！
- AAR只包含networklib模块编译后的类文件
- AAR会生成一个pom.xml文件声明依赖关系
- 但是Gradle默认不会自动下载传递依赖
- **使用AAR的项目必须手动添加所有依赖**

### 2. OkHttp依赖

- OkGo已经包含了OkHttp3，无需单独添加OkHttp依赖
- OkGo的传递依赖：`OkHttp3 -> OkIO`

### 3. 版本一致性

- 建议使用与networklib相同的依赖版本
- 避免版本冲突和兼容性问题

### 4. 网络权限

使用网络请求功能需要在AndroidManifest.xml中添加：
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

### 5. Response对象使用

由于AAR不包含OkGo类，使用其他工程时需要：
```gradle
dependencies {
    implementation files('libs/networklib-release.aar')
    implementation 'com.lzy.net:okgo:3.0.4'  // 必须添加
    // 其他依赖...
}
```

然后就可以使用：
```java
import com.lzy.okgo.model.Response;
```

## 依赖更新建议

如果需要更新依赖版本，建议：

1. **OkGo**：检查新版本是否兼容当前代码
2. **Gson**：Gson向后兼容性较好，可以尝试更新到最新版本
3. **AppCompat**：建议使用最新稳定版本

更新后需要：
- 测试所有网络请求功能
- 检查是否有API变更
- 更新文档说明

